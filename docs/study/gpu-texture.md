# GPU 纹理技术文档

## 目录

1. [概述](#概述)
2. [核心原理](#核心原理)
3. [纹理类型](#纹理类型)
4. [纹理数据格式](#纹理数据格式)
5. [纹理采样方法](#纹理采样方法)
6. [应用场景](#应用场景)
7. [实践与优化](#实践与优化)
8. [注意事项](#注意事项)
9. [参考资料](#参考资料)

---

## 概述

GPU 纹理（Texture）是计算机图形学中用于存储图像数据的一种 GPU 资源。纹理不仅可以存储二维图像，还可扩展为三维数据或数组数据，在渲染管线中用于采样、映射和滤波，实现丰富的视觉效果。

纹理的核心作用包括：

* 提供高效的图像数据访问
* 支持各种采样和过滤方法
* 为 GPU 着色器提供数据输入

---

## 核心原理

GPU 纹理的工作原理基于 **纹理映射（Texture Mapping）** 和 **采样（Sampling）** 概念：

1. **纹理映射**
   将纹理图像映射到几何图形表面上，通常通过顶点的纹理坐标（UV 坐标）完成。

   * UV 坐标范围通常在 `[0,1]` 之间
   * 可实现重复（wrap）、镜像（mirror）等效果

2. **纹理采样**
   GPU 根据纹理坐标访问纹理数据，并进行插值处理，输出最终像素颜色。
   采样过程可以包含：

   * 坐标映射
   * 纹理过滤（如最近邻、线性插值）
   * mipmap 选择（多级纹理细节）

3. **存储与访问**

   * 纹理通常存储在 GPU 的专用纹理内存（Texture Memory）中
   * GPU 通过纹理单元（Texture Unit）和采样器（Sampler）访问纹理数据

---

## 纹理类型

GPU 支持多种纹理类型，满足不同渲染需求：

| 类型                   | 描述           | 应用场景               |
| -------------------- | ------------ | ------------------ |
| 1D 纹理                | 单行像素序列       | 曲线、条形数据            |
| 2D 纹理                | 常见的图片纹理      | Diffuse、Normal Map |
| 3D 纹理                | 体积数据，如体积渲染   | 医学影像、烟雾模拟          |
| 立方体纹理 (Cube Map)     | 六张正方形面构成的立方体 | 环境映射、反射、天空盒        |
| 数组纹理                 | 同尺寸多层纹理集合    | 多帧动画、数组采样          |
| 多采样纹理 (MSAA Texture) | 支持抗锯齿        | 多重采样渲染             |

---

## 纹理数据格式

纹理的数据格式决定了每个像素的存储方式和精度：

### 1. 按颜色通道类型分类

* **RGBA**：红、绿、蓝、透明度
* **RGB**：红、绿、蓝
* **Luminance**：灰度
* **Depth/Stencil**：深度和模板缓冲

### 2. 按存储精度分类

* **8-bit**：每通道 8 位，常见于普通贴图
* **16-bit**：半精度浮点，用于 HDR
* **32-bit float**：高精度纹理，用于科学计算和高精度渲染

### 3. 压缩纹理格式

* **DXT / BCn 系列**：用于减少 GPU 内存占用
* **ASTC / ETC2**：移动端和嵌入式设备压缩纹理

---

## 纹理采样方法

纹理采样是 GPU 渲染中至关重要的环节，常用采样方法包括：

### 1. 坐标处理

* **Clamp**：边界坐标截断到 `[0,1]`
* **Repeat / Wrap**：超出边界坐标循环
* **Mirror**：超出边界坐标镜像

### 2. 过滤方法

* **Nearest（最近邻）**：取最近像素，速度快但可能锯齿明显
* **Linear（线性插值）**：周围像素线性加权平均，平滑
* **Mipmapping**：多级纹理，通过 LOD（Level of Detail）选择不同分辨率纹理
* **Anisotropic Filtering**：各向异性过滤，保持斜面纹理清晰

---

## 应用场景

GPU 纹理在现代图形和计算中有广泛应用：

1. **渲染贴图**

   * Diffuse Map（漫反射贴图）
   * Normal Map（法线贴图）
   * Specular Map（高光贴图）

2. **环境映射**

   * Cube Map 用于天空盒和反射效果

3. **体积渲染**

   * 3D 纹理用于医学成像、烟雾、火焰模拟

4. **计算和存储**

   * GPGPU 中纹理用于存储数组数据，支持硬件加速插值

---

## 实践与优化

1. **内存优化**

   * 使用压缩纹理格式减少显存占用
   * 合理使用 mipmap，降低远距离采样成本

2. **性能优化**

   * 结合纹理缓存，减少访问延迟
   * 尽量使用线性和硬件支持的采样方法

3. **纹理管理**

   * 动态加载与卸载纹理
   * 纹理数组和批处理减少状态切换

---

## 注意事项

* 确保纹理尺寸符合 GPU 要求（通常为 2 的幂次方）
* 选择合适的数据格式，避免过度占用显存
* 注意纹理坐标范围与 wrap 模式匹配
* 使用压缩纹理时需考虑兼容性（不同平台支持不同格式）
* 对于移动端，尽量减少大尺寸纹理和高精度浮点纹理

---

## 参考资料

1. [OpenGL Texture Documentation](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml)
2. [DirectX 12 Texture Overview](https://learn.microsoft.com/en-us/windows/win32/direct3d12/overviews-direct3d-12-resources-textures)
3. [Real-Time Rendering, 4th Edition](https://www.realtimerendering.com/)
4. GPU Gems 系列章节：纹理与采样

---

我可以帮你再生成一个 **图解版 GPU 纹理工作流程图和类型示意图**，这样配合文档会更直观易懂。

你希望我帮你画吗？
